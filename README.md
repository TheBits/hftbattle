#Пакет для локальной разработки

Мы подготовили пакет для локальной разработки стратегий на C++. Он включает в себя набор библиотек и файлов, достаточный для разработки и тестирования стратегий на вашем компьютере. 

Пакет опубликован на [GitHub](https://github.com/hftbattle/local_pack). 
Его можно скачать следующей командой (должен быть установлен [Git](http://git-scm.com/download)):
```
git clone https://github.com/hftbattle/local_pack.git
```

Подробнее об использовании пакета для локальной разработки:
  - [Установка зависимостей](#requirements)
  - [Данные для симуляции](#data)
  - [Компиляция и запуск стратегии](#run)
  
<a name="requirements"></a>
##Установка зависимостей
### [Ubuntu](#ubuntu)
Для установки зависимостей на Ubuntu можно запустить скрипт *packages_ubuntu.sh*, находящийся в корне репозитория:
```
./packages_ubuntu.sh
```

Скрипт устанавливает:
- Компилятор g++ 4.9,

- [CMake](https://cmake.org/) 2.8.4 и выше:
```
sudo apt-get install cmake
```

### [Mac OS X](#macosx)
Для установки зависимостей на Mac OS X можно запустить скрипт *packages_mac.sh*, находящийся в корне репозитория:
```
./packages_mac.sh
```

Скрипт устанавливает:
- Компилятор Apple LLVM 6.0 и выше (подробное описание процедуру установки [здесь](http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/)):
```
xcode-select --install
```
- Менеджер пакетов [Homebrew](http://brew.sh/):
```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```
- [CMake](https://cmake.org/) 2.8.4 и выше:
```
brew install cmake
```

### [Windows](#windows)
Для запуска под Windows необходимо иметь:
- Компилятор [MinGW-w64 4.9](http://sourceforge.net/projects/mingw-w64/) и выше:

Необходимо установить скачанный компилятор с настройками:
```
--rev=0 --bootstrap --jobs=4 --threads=posix --exceptions=seh --arch=x86_64
```
Затем следует добавить файл с бинарниками в переменную окружения *path*:
```
setx path "%path%;YOUR_PATH_TO_MINGW\x86_64-4.9.2-posix-seh-rt_v3-rev0\mingw64\bin"
```

- [CMake](https://cmake.org/) 2.8.4 и выше:

Например, можно поставить [CLion](https://www.jetbrains.com/clion/download/), *CMake* будет в комплекте. Далее необходимо добавить путь до *cmake.exe* в переменную окружения *PATH*.

- Python 2.7 и выше. Можно скачать [здесь](https://www.python.org/downloads/).

<a name="data"></a>
## Данные для симуляции
В репозитории пакета находится папка *data*, в которой содержатся данные за несколько часов работы биржи (строка в конфиге `"date": "2015.09.29"`) как для инструмента *ES*, так и для пары инструментов *CL*.

Этого достаточно для того, чтобы:
- убедиться, что ваш код компилируется,
- отладить вашу стратегию.

Однако чтобы проверить саму идею стратегии, вы можете скачать данные за один полный торговый день 2015.09.30 [по этой ссылке](https://www.dropbox.com/s/s1uxgs3vj3tgvr7/data.zip).

Это можно сделать вручную или с помощью скрипта *download.py* в корне директории *local_pack*:
```
./download.py
```
Скрипт скачает файл *data.zip* и разархивирует его в папку *data*.

Для тестирования стратегии на полном дне нужно изменить строку с датой в конфиге на `2015.09.30`: 
```
"date": "2015.09.30"
```

<a name="run"></a>
## Компиляция и запуск стратегии

### [Запуск из командной строки](#command_line)

Ваша стратегия должна быть реализована в одном файле *user_strategy.cpp*.

Для компиляции стратегии надо выполнить команду 
```
./build.py
```

Она соберет все стратегии (файлы вида *strategies/[strategy_dir]/[strategy_name].cpp*) в библиотеки в папку *build*.

Для запуска стратегии нужно выполнить команду
```
./run.py strategies/user_strategy/user_strategy.json
```

### [Запуск из CLion](#clion)
Для запуска из [CLion](https://www.jetbrains.com/clion/download/) необходимо 
- задать исполняемый файл:

Для этого заходим в *Run > Edit configurations*, там задаем в качестве *Executable* исполняемый файл, соответствующий вашей платформе. Например, для Mac OS X исполняемый файл называется *mac_launcher* и лежит в корне репозитория.

- прописать путь до конфига в аргументах командной строки:

Для этого в той же вкладке *Run > Edit configurations* в строчке *Program arguments* пишем относительный путь до конфига вашей стратегии от корня репозитория, например:
```
./strategies/user_strategy/user_strategy.json
```

Далее можете запускать свою стратегию нажав кнопку *Run*.





